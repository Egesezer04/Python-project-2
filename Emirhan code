class Scraper:
    def __init__(self, url):
        self.url = url

    def fetch_html(self):
        try:
            resp = requests.get(self.url, timeout=10)
            resp.raise_for_status()
            return resp.text
        except requests.RequestException as e:
            print("Hata: Sayfa Ã§ekilemedi.", e)
            return ""

    def parse_listings(self, html):
        soup = BeautifulSoup(html, "html.parser")
        items = soup.select(".listing")

        listings = []
        for item in items:
            title = self._get_title(item)
            price = self._get_price(item)
            description = self._get_description(item)
            images = self._get_images(item)

            listings.append(Listing(title, price, description, images))
        return listings

    def _get_title(self, item):
        t = item.select_one(".title")
        return t.get_text(strip=True) if t else ""

    def _get_price(self, item):
        p = item.select_one(".price")
        raw = p.get_text(strip=True) if p else ""
        return self._parse_price(raw)

    def _get_description(self, item):
        d = item.select_one(".desc")
        return d.get_text(strip=True) if d else ""

    def _get_images(self, item):
        imgs = item.select(".img")
        return [img["src"] for img in imgs if img.has_attr("src")]

    @staticmethod
    def _parse_price(raw):
        raw = raw.replace(".", "").replace(",", "").replace("TL", "").strip()
        try:
            return float(raw)
        except ValueError:
            return None

            
    




        
       
        

